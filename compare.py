# Python program for face 
# comparison 
  
  
from __future__ import print_function, unicode_literals 
from facepplib import FacePP, exceptions 
import os
import pandas as pd
import matplotlib.pyplot as plt
import time
   
# define face comparing function 
def face_compare(app, Image1, Image2): 
    cmp_ = app.compare.get(image_url1 = Image1, 
                           image_url2 = Image2) 
   
    return cmp_.confidence

def get_image_url(path):
    base_url = 'https://raw.githubusercontent.com/Rebeccaxu0/cs312/refs/heads/main/'
    return base_url + path
   
# Driver Code  
if __name__ == '__main__': 
   
    # api details 
    api_key ='xQLsTmMyqp1L2MIt7M3l0h-cQiy0Dwhl'
    api_secret ='TyBSGw8NBEP9Tbhv_JbQM18mIlorY6-D'
   
           
    # call api 
    app_ = FacePP(api_key = api_key,  
                    api_secret = api_secret) 
    
    synthetic_folder = 'Synthetic-Images'
    training_folder = 'Training-Images'

    synthetic_images = ['image_15.png', 'image_29.png', 'image_28.png', 'image_14.png', 'image_16.png', 'image_17.png', 'image_13.png', 'image_12.png', 'image_10.png', 'image_11.png', 'image_8.png', 'image_9.png', 'image_2.png', 'image_3.png', 'image_1.png', 'image_4.png', 'image_5.png', 'image_7.png', 'image_6.png', 'image_20.png', 'image_34.png', 'image_35.png', 'image_21.png', 'image_23.png', 'image_22.png', 'image_36.png', 'image_32.png', 'image_26.png', 'image_27.png', 'image_33.png', 'image_19.png', 'image_25.png', 'image_31.png', 'image_30.png', 'image_24.png', 'image_18.png']
    training_images = ['003467.jpg', '003473.jpg', '000152.jpg', '000146.jpg', '000191.jpg', '003498.jpg', '000185.jpg', '003103.jpg', '003117.jpg', '000378.jpg', '003881.jpg', '003895.jpg', '003842.jpg', '003856.jpg', '000218.jpg', '003077.jpg', '000224.jpg', '000542.jpg', '002427.jpg', '000230.jpg', '003936.jpg', '003088.jpg', '000595.jpg', '003922.jpg', '001462.jpg', '003513.jpg', '003507.jpg', '002631.jpg', '000032.jpg', '002625.jpg', '000754.jpg', '002624.jpg', '000999.jpg', '002630.jpg', '003506.jpg', '003512.jpg', '003923.jpg', '003937.jpg', '003089.jpg', '001891.jpg', '000231.jpg', '002426.jpg', '002432.jpg', '000225.jpg', '000219.jpg', '003076.jpg', '003857.jpg', '000386.jpg', '003843.jpg', '000345.jpg', '003894.jpg', '003880.jpg', '003116.jpg', '003102.jpg', '000184.jpg', '003499.jpg', '000190.jpg', '000147.jpg', '000153.jpg', '003472.jpg', '003466.jpg', '001271.jpg', '003470.jpg', '000179.jpg', '003464.jpg', '000145.jpg', '003458.jpg', '000151.jpg', '000810.jpg', '000186.jpg', '000192.jpg', '003114.jpg', '003100.jpg', '003896.jpg', '003128.jpg', '003882.jpg', '003869.jpg', '003855.jpg', '003841.jpg', '001663.jpg', '003074.jpg', '002424.jpg', '000233.jpg', '000555.jpg', '000227.jpg', '002430.jpg', '003909.jpg', '003921.jpg', '003935.jpg', '003504.jpg', '003510.jpg', '003538.jpg', '002626.jpg', '002632.jpg', '000970.jpg', '002633.jpg', '001448.jpg', '000756.jpg', '002627.jpg', '003539.jpg', '003511.jpg', '003505.jpg', '003934.jpg', '003920.jpg', '001689.jpg', '003908.jpg', '002431.jpg', '000226.jpg', '000232.jpg', '002425.jpg', '000554.jpg', '003075.jpg', '003840.jpg', '003854.jpg', '003868.jpg', '003883.jpg', '003897.jpg', '003129.jpg', '003101.jpg', '001716.jpg', '003115.jpg', '000193.jpg', '000187.jpg', '000811.jpg', '000150.jpg', '003459.jpg', '000144.jpg', '003465.jpg', '000178.jpg', '003471.jpg', '000140.jpg', '000154.jpg', '003475.jpg', '000168.jpg', '003461.jpg', '000183.jpg', '000197.jpg', '003893.jpg', '003887.jpg', '003139.jpg', '003111.jpg', '001706.jpg', '003105.jpg', '003850.jpg', '003844.jpg', '003878.jpg', '002421.jpg', '000236.jpg', '000222.jpg', '001882.jpg', '003065.jpg', '001100.jpg', '000578.jpg', '003071.jpg', '003924.jpg', '003930.jpg', '003918.jpg', '002623.jpg', '000752.jpg', '003529.jpg', '002637.jpg', '003501.jpg', '003515.jpg', '003514.jpg', '001303.jpg', '003500.jpg', '002636.jpg', '003528.jpg', '002622.jpg', '001868.jpg', '003919.jpg', '003931.jpg', '003925.jpg', '003070.jpg', '003064.jpg', '000223.jpg', '000237.jpg', '002420.jpg', '003879.jpg', '003845.jpg', '003851.jpg', '001075.jpg', '003104.jpg', '003110.jpg', '003886.jpg', '001049.jpg', '003138.jpg', '003892.jpg', '000196.jpg', '000182.jpg', '001511.jpg', '003460.jpg', '000169.jpg', '003474.jpg', '000155.jpg', '000141.jpg', '000157.jpg', '000625.jpg', '000143.jpg', '003462.jpg', '003476.jpg', '000194.jpg', '003489.jpg', '000180.jpg', '000433.jpg', '003884.jpg', '003890.jpg', '003106.jpg', '003112.jpg', '003847.jpg', '001088.jpg', '003853.jpg', '001922.jpg', '000221.jpg', '002422.jpg', '000235.jpg', '003072.jpg', '000209.jpg', '003066.jpg', '003933.jpg', '003927.jpg', '003099.jpg', '000590.jpg', '002634.jpg', '000751.jpg', '000037.jpg', '003516.jpg', '003502.jpg', '000793.jpg', '003503.jpg', '003517.jpg', '002621.jpg', '000036.jpg', '002635.jpg', '000744.jpg', '003926.jpg', '003098.jpg', '001843.jpg', '003932.jpg', '000208.jpg', '003067.jpg', '003073.jpg', '000234.jpg', '002423.jpg', '000220.jpg', '003852.jpg', '001089.jpg', '003846.jpg', '003113.jpg', '003107.jpg', '000368.jpg', '003891.jpg', '003885.jpg', '000817.jpg', '000181.jpg', '003488.jpg', '000195.jpg', '003477.jpg', '003463.jpg', '000142.jpg', '000156.jpg', '000119.jpg', '000131.jpg', '000125.jpg', '003160.jpg', '001011.jpg', '001763.jpg', '003174.jpg', '003148.jpg', '001950.jpg', '003835.jpg', '001944.jpg', '002478.jpg', '001617.jpg', '002450.jpg', '000247.jpg', '000253.jpg', '002444.jpg', '000284.jpg', '002493.jpg', '003955.jpg', '002487.jpg', '003941.jpg', '000079.jpg', '003202.jpg', '002652.jpg', '000723.jpg', '000737.jpg', '002646.jpg', '000086.jpg', '000092.jpg', '000093.jpg', '000087.jpg', '000911.jpg', '002647.jpg', '002653.jpg', '000044.jpg', '003203.jpg', '001372.jpg', '000078.jpg', '003940.jpg', '002486.jpg', '003954.jpg', '002492.jpg', '000285.jpg', '002445.jpg', '000252.jpg', '000246.jpg', '002451.jpg', '002479.jpg', '003834.jpg', '001951.jpg', '003149.jpg', '000332.jpg', '003175.jpg', '003161.jpg', '000695.jpg', '000865.jpg', '000124.jpg', '000130.jpg', '000118.jpg', '001562.jpg', '000668.jpg', '000126.jpg', '000132.jpg', '002269.jpg', '003177.jpg', '003163.jpg', '003188.jpg', '003836.jpg', '001953.jpg', '000278.jpg', '000250.jpg', '002447.jpg', '002453.jpg', '000244.jpg', '001833.jpg', '002484.jpg', '003942.jpg', '000287.jpg', '002490.jpg', '003956.jpg', '003201.jpg', '002645.jpg', '002651.jpg', '000091.jpg', '000085.jpg', '000084.jpg', '000090.jpg', '000912.jpg', '002650.jpg', '000047.jpg', '001359.jpg', '002644.jpg', '000735.jpg', '003200.jpg', '003957.jpg', '002491.jpg', '000286.jpg', '003943.jpg', '002485.jpg', '000245.jpg', '002452.jpg', '000537.jpg', '002446.jpg', '000251.jpg', '000279.jpg', '001952.jpg', '003189.jpg', '003837.jpg', '000331.jpg', '003162.jpg', '003176.jpg', '000133.jpg', '000127.jpg', '000123.jpg', '000137.jpg', '001229.jpg', '003172.jpg', '003166.jpg', '003833.jpg', '003199.jpg', '000255.jpg', '002442.jpg', '002456.jpg', '000241.jpg', '000269.jpg', '001605.jpg', '001163.jpg', '003947.jpg', '002481.jpg', '000282.jpg', '003953.jpg', '002495.jpg', '002640.jpg', '002654.jpg', '003204.jpg', '000094.jpg', '000080.jpg', '000081.jpg', '000095.jpg', '001406.jpg', '003205.jpg', '002655.jpg', '002641.jpg', '002494.jpg', '003952.jpg', '000283.jpg', '002480.jpg', '003946.jpg', '000268.jpg', '000240.jpg', '002457.jpg', '002443.jpg', '000254.jpg', '003198.jpg', '003832.jpg', '003167.jpg', '000308.jpg', '003173.jpg', '001764.jpg', '001214.jpg', '001572.jpg', '000136.jpg', '000650.jpg', '000122.jpg', '000134.jpg', '000120.jpg', '000108.jpg', '000691.jpg', '003159.jpg', '003165.jpg', '003171.jpg', '000487.jpg', '001969.jpg', '002455.jpg', '000242.jpg', '000256.jpg', '002469.jpg', '001174.jpg', '000281.jpg', '003950.jpg', '002496.jpg', '003944.jpg', '002482.jpg', '001809.jpg', '003549.jpg', '002657.jpg', '002643.jpg', '000068.jpg', '003207.jpg', '000083.jpg', '000097.jpg', '000929.jpg', '000914.jpg', '000096.jpg', '000082.jpg', '000069.jpg', '003206.jpg', '000055.jpg', '002642.jpg', '002656.jpg', '003548.jpg', '000294.jpg', '002483.jpg', '003945.jpg', '002497.jpg', '003951.jpg', '000280.jpg', '002468.jpg', '000257.jpg', '000243.jpg', '002454.jpg', '001968.jpg', '003170.jpg', '001015.jpg', '003164.jpg', '003158.jpg', '000684.jpg', '000109.jpg', '000121.jpg', '000135.jpg', '000886.jpg', '000138.jpg', '000110.jpg', '000104.jpg', '003141.jpg', '003155.jpg', '000306.jpg', '000460.jpg', '003169.jpg', '003182.jpg', '003196.jpg', '001971.jpg', '001144.jpg', '002459.jpg', '000266.jpg', '002471.jpg', '002465.jpg', '000272.jpg', '003948.jpg', '003960.jpg', '001434.jpg', '003545.jpg', '000070.jpg', '000071.jpg', '000065.jpg', '000703.jpg', '003544.jpg', '003550.jpg', '003961.jpg', '003949.jpg', '000273.jpg', '002464.jpg', '002470.jpg', '000267.jpg', '002458.jpg', '000529.jpg', '001970.jpg', '003197.jpg', '003183.jpg', '003168.jpg', '002262.jpg', '003154.jpg', '003140.jpg', '000105.jpg', '000111.jpg', '000139.jpg', '000107.jpg', '000113.jpg', '003156.jpg', '003142.jpg', '003195.jpg', '003181.jpg', '001972.jpg', '000259.jpg', '002466.jpg', '000271.jpg', '000265.jpg', '002472.jpg', '002499.jpg', '003963.jpg', '003546.jpg', '002658.jpg', '000073.jpg', '002664.jpg', '001379.jpg', '000067.jpg', '000098.jpg', '000099.jpg', '001393.jpg', '000066.jpg', '002665.jpg', '000072.jpg', '002659.jpg', '003547.jpg', '001436.jpg', '003962.jpg', '002498.jpg', '002473.jpg', '000264.jpg', '000270.jpg', '002467.jpg', '000258.jpg', '001973.jpg', '003180.jpg', '003194.jpg', '003143.jpg', '003157.jpg', '000674.jpg', '000112.jpg', '000106.jpg', '001542.jpg', '000102.jpg', '000116.jpg', '002265.jpg', '003153.jpg', '003147.jpg', '003190.jpg', '003184.jpg', '002463.jpg', '000274.jpg', '000260.jpg', '002477.jpg', '000248.jpg', '002488.jpg', '000076.jpg', '002661.jpg', '003543.jpg', '002649.jpg', '000089.jpg', '000088.jpg', '002648.jpg', '003542.jpg', '002660.jpg', '000077.jpg', '002489.jpg', '001157.jpg', '000249.jpg', '001619.jpg', '002476.jpg', '000261.jpg', '000275.jpg', '002462.jpg', '003185.jpg', '003191.jpg', '001976.jpg', '003146.jpg', '001745.jpg', '003152.jpg', '002502.jpg', '000315.jpg', '001590.jpg', '001235.jpg', '001553.jpg', '000117.jpg', '000103.jpg', '000115.jpg', '000101.jpg', '000667.jpg', '000129.jpg', '002500.jpg', '003178.jpg', '001035.jpg', '003144.jpg', '003150.jpg', '001974.jpg', '003839.jpg', '003187.jpg', '001948.jpg', '003193.jpg', '000263.jpg', '002474.jpg', '000511.jpg', '002460.jpg', '000277.jpg', '002448.jpg', '003965.jpg', '003959.jpg', '000707.jpg', '001419.jpg', '000075.jpg', '002662.jpg', '003540.jpg', '003541.jpg', '002663.jpg', '000074.jpg', '003958.jpg', '003964.jpg', '002449.jpg', '000276.jpg', '002461.jpg', '002475.jpg', '000262.jpg', '003192.jpg', '003838.jpg', '001949.jpg', '003186.jpg', '001975.jpg', '003151.jpg', '003145.jpg', '002501.jpg', '003179.jpg', '000869.jpg', '000128.jpg', '000100.jpg', '001578.jpg', '000114.jpg', '000615.jpg', '000173.jpg', '000167.jpg', '003485.jpg', '003491.jpg', '001286.jpg', '000198.jpg', '003122.jpg', '003136.jpg', '003888.jpg', '000417.jpg', '001090.jpg', '003863.jpg', '003877.jpg', '000239.jpg', '001641.jpg', '001899.jpg', '001133.jpg', '002412.jpg', '000205.jpg', '000211.jpg', '003095.jpg', '003081.jpg', '003917.jpg', '003903.jpg', '003532.jpg', '003526.jpg', '002638.jpg', '000946.jpg', '002639.jpg', '003527.jpg', '003533.jpg', '003902.jpg', '003916.jpg', '003080.jpg', '003094.jpg', '001683.jpg', '000210.jpg', '000204.jpg', '002413.jpg', '000562.jpg', '001654.jpg', '001126.jpg', '000238.jpg', '001640.jpg', '003876.jpg', '003862.jpg', '001708.jpg', '003137.jpg', '003889.jpg', '003123.jpg', '000199.jpg', '003490.jpg', '003484.jpg', '000166.jpg', '000172.jpg', '000158.jpg', '000164.jpg', '000170.jpg', '003479.jpg', '003492.jpg', '003486.jpg', '001044.jpg', '003135.jpg', '003121.jpg', '003109.jpg', '003848.jpg', '003874.jpg', '003860.jpg', '000212.jpg', '003069.jpg', '002411.jpg', '000206.jpg', '003082.jpg', '003096.jpg', '003928.jpg', '003900.jpg', '001871.jpg', '003914.jpg', '003525.jpg', '003531.jpg', '003519.jpg', '000010.jpg', '000789.jpg', '000950.jpg', '001469.jpg', '000011.jpg', '003518.jpg', '003530.jpg', '003524.jpg', '003915.jpg', '003901.jpg', '003097.jpg', '002389.jpg', '001858.jpg', '003929.jpg', '003083.jpg', '003068.jpg', '000207.jpg', '002410.jpg', '000213.jpg', '003861.jpg', '003875.jpg', '003849.jpg', '001079.jpg', '003108.jpg', '003120.jpg', '003134.jpg', '003487.jpg', '003493.jpg', '003478.jpg', '000171.jpg', '000165.jpg', '000159.jpg', '003468.jpg', '000161.jpg', '000175.jpg', '000149.jpg', '003497.jpg', '003483.jpg', '003118.jpg', '003130.jpg', '003124.jpg', '001733.jpg', '003871.jpg', '003865.jpg', '003859.jpg', '003078.jpg', '000217.jpg', '000203.jpg', '002428.jpg', '003905.jpg', '003911.jpg', '003087.jpg', '003939.jpg', '003093.jpg', '000767.jpg', '003508.jpg', '003520.jpg', '003534.jpg', '000954.jpg', '001487.jpg', '003535.jpg', '003521.jpg', '003509.jpg', '003092.jpg', '003086.jpg', '003938.jpg', '003910.jpg', '003904.jpg', '002429.jpg', '000202.jpg', '003079.jpg', '000216.jpg', '003858.jpg', '003864.jpg', '001901.jpg', '003870.jpg', '003125.jpg', '003131.jpg', '003119.jpg', '003482.jpg', '003496.jpg', '000148.jpg', '003455.jpg', '000174.jpg', '000160.jpg', '003469.jpg', '000176.jpg', '000162.jpg', '003457.jpg', '000189.jpg', '003480.jpg', '000823.jpg', '003494.jpg', '000360.jpg', '003127.jpg', '001730.jpg', '003899.jpg', '003133.jpg', '003866.jpg', '003872.jpg', '000200.jpg', '000214.jpg', '000228.jpg', '003912.jpg', '003906.jpg', '003090.jpg', '003084.jpg', '003537.jpg', '002629.jpg', '003523.jpg', '003522.jpg', '002628.jpg', '003536.jpg', '003085.jpg', '003091.jpg', '003907.jpg', '003913.jpg', '000229.jpg', '000215.jpg', '000201.jpg', '003873.jpg', '001902.jpg', '003867.jpg', '003132.jpg', '003126.jpg', '003898.jpg', '003495.jpg', '003481.jpg', '000188.jpg', '003456.jpg', '001533.jpg', '000163.jpg', '000177.jpg']
        
    # Create an empty DataFrame to store results
    similarity_matrix = pd.DataFrame(index=synthetic_images, columns=training_images)

    # Loop through each pair
    for synth_img in synthetic_images:
        for train_img in training_images:
            url1 = get_image_url(f"{synthetic_folder}/{synth_img}")
            url2 = get_image_url(f"{training_folder}/{train_img}")
            score = face_compare(app_, url1, url2)
            print(f"Comparing {synth_img} and {train_img}: score={score}")
            similarity_matrix.at[synth_img, train_img] = score
            time.sleep(1.5)

    
    similarity_matrix.to_csv("similarity_matrix.csv")
    plt.figure()
    plt.imshow(similarity_matrix)